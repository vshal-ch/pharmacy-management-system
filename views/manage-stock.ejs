<!DOCTYPE html>
<html>
  <head>
    <script>
      let json = localStorage.getItem("info");
      let obj = JSON.parse(json);
      if (json) {
        if (obj.pos !== "manager") {
          location.href = "/" + obj.pos;
        }
      } else {
        location.href = "/login";
      }
    </script>
    <title>View Stocks | Pharmacy System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./css/header-nav.css" />
    <link rel="stylesheet" href="./css/main-with-table.css" />
    <link rel="stylesheet" href="./css/add-form.css" />
    <script src="./js/change-content.js" defer></script>
    <script src="./js/formValidate.js" defer></script>
  </head>
  <body>
    <header>
      <div class="logo-cont">
        <img
          src="./assets/logos/logo.png"
          class="main-logo"
          height="75"
          width="75"
        />
      </div>
      <h1>
        <a href="#">Pharmacy System</a>
      </h1>
    </header>
    <aside>
      <ul class="aside-list">
        <li class="list-item"><a href="/manager">Dashboard</a></li>
        <li class="list-item"><a href="/manager/view">View Users</a></li>
        <li class="list-item"><a href="/manager/presc">View Prescriptions</a></li>
        <li class="list-item"><a href="#">Manage Stock</a></li>
        <li class="list-item"><a href="/logout">Logout</a></li>
      </ul>
    </aside>
    <main>
      <section class="main-content">
        <h2 class="title">View Stocks</h2>
        <div class="container">
          <ul class="tabs-list">
            <li class="tab-item active" data-goto="table">
              <h3 class="tab-title">View Stocks</h3>
            </li>
            <li class="tab-item" data-goto="form">
              <h3 class="tab-title">Add Medicine</h3>
            </li>
          </ul>
          <div class="content">
            <table class="tab-content" id="table">
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Category</th>
                <th>Discription</th>
                <th>Left</th>
                <th>Unit Cost</th>
              </tr>
              <% if(locals.tableData && locals.tableData.length>0) {
                    tableData.forEach(data=>{%> 
              <tr>
                <td><%= data.id %></td>
                <td><%= data.name %></td>
                <td><%= data.category %></td>
                <td><%= data.desc %></td>
                <td><%= data.quantity %></td>
                <td><%= data.cost %></td>
              </tr>
              <% })}%>
            </table>
            <form class="hidden tab-content" id="form" action='/manager/stocks' method="post">
              <input
                type="number"
                name="stockId"
                class="input"
                placeholder="Stock ID"
                required
              />
              <input
                type="text"
                name="drug"
                class="input"
                placeholder="Drug Name"
                required
              />
              <input
                type="text"
                name="category"
                class="input"
                placeholder="Category"
                required
              />
              <input
                type="text"
                name="desc"
                class="input"
                placeholder="Description"
                required
              />
              <input
                type="text"
                name="company"
                class="input"
                placeholder="ManufacturingCompany"
                required
              />
              <input
                type="text"
                name="supplier"
                class="input"
                placeholder="Supplier"
                required
              />
              <input
                type="number"
                name="quantity"
                class="input"
                placeholder="Quantity"
                required
              />
              <input
                type="number"
                name="unitCost"
                class="input"
                placeholder="Unit cost"
                required
              />
              <input type="submit" value="ADD" />
            </form>
          </div>
        </div>
      </section>
    </main>
  </body>
</html>
